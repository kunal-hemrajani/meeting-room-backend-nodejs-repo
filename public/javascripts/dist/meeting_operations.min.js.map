{"version":3,"sources":["meeting_operations.js"],"names":["express","require","dbConnection","http","app","use","json","mysql","dbConn","createConnection","bodyParser","next","res","header","log","req","agenda","body","name","date","console","start_time","sql","end_time","room_id","err","query","result","msg","post","id","resultNext","sqlNext","response","listen"],"mappings":"aAAA,IAAMA,QAAUC,QAAQ,WAClBC,aAAeD,QAAQ,mBADvBD,IAAOA,UAGTG,KAAOF,QAAQ,QAFbC,WAAeD,QAAQ,eAI7BG,IAAIC,IAAIL,QAAQM,QAEhB,IAAIC,MAAQN,QAAQ,SAEhBO,OAASD,MAAME,iBAAiBP,cALpCE,IAAMM,IAAAA,SAAaT,EAAAA,EAAQU,GAOvBC,EAAIC,OAAO,8BAA+B,KAN1CR,EAAIL,OAAO,+BACf,kDAOIW,MAJJP,IAAII,KAAAA,kBAAeC,SAAAA,EAAAA,GACfJ,QAAIS,IAAAC,EAASA,KAAKH,MAElBA,OAAIC,MADO,6BACA,CACPG,OAAAD,EAAAE,KAAAD,OAHRE,KAAAH,EAAAE,KAAAC,KAMAC,KAASJ,EAAAE,KAAAE,KACLC,WAAgBH,EAAKE,KAArBE,WACIC,SAAMP,EAAAE,KAAAM,SACJC,QAAOF,EAAKL,KAAAO,SACdR,SAAYC,EAAKD,GACb,GAAED,EAAIE,MAFIQ,EAGVb,EAAEG,KAAIE,CACVI,IAAe,4BAKfT,IAAAA,KAAIN,sBAAK,SAAAS,EAAAH,GACLQ,QAAAN,IAAOC,EAAAE,MAVfT,OAAAkB,MASI,2CATJ,CAAAX,EAAAE,KAAAO,SAAA,SAAAC,EAAAE,GAHJ,GAAAF,EAAA,MAAAA,EAkBAL,QAASN,IAAAa,GACLP,EAAQN,KAAO,CACLc,IAAA,WACHF,SAAeC,QAKdvB,IAAAyB,KAAA,kBAAYF,SAAAA,EAAAA,GALpBnB,OAAAkB,MAGI,mCAHJ,CAAAX,EAAAE,KAAAa,IAAA,SAAAL,EAAAE,GAHJ,GAAAF,EAAA,MAAAA,EAaAb,EAASN,KAAA,CACKsB,IAAA,iBAGGxB,IAAAyB,KAAT,aAAA,SAAAd,EAAAH,GAJRJ,OAAAkB,MAEI,0CAFJ,CAAAX,EAAAE,KAAAa,IAAA,SAAAL,EAAAM,GAUA,GAASN,EAAA,MAAcA,EACfO,EAAAA,KAAU,CACPN,IAAMM,WACTC,SAASF,QA4BjB3B,IAAI8B,OAAO,OAAQ,WAAA,OAAAd,QAAAN,IAAA","file":"meeting_operations.min.js","sourcesContent":["const express = require('express');\r\nconst dbConnection = require('./db_connection');\r\nconst app = express();\r\nvar http = require('http');\r\nconst bodyParser = require(\"body-parser\");\r\napp.use(express.json());\r\n// app.use(bodyParser.urlencoded({ extended: true }));\r\nvar mysql = require('mysql');\r\n\r\nvar dbConn = mysql.createConnection(dbConnection);\r\napp.use(function(req, res, next) {\r\n    res.header(\"Access-Control-Allow-Origin\", \"*\");\r\n    res.header(\"Access-Control-Allow-Headers\", \"Origin, X-Requested-With, Content-Type, Accept\");\r\n    next();\r\n});\r\n\r\napp.post('/insert_meeting', (req, res) => {\r\n    console.log(req.body.date);\r\n    var sql = \"INSERT INTO meeting SET ? \";\r\n    dbConn.query(sql, {\r\n        agenda: req.body.agenda,\r\n        name: req.body.name,\r\n        date: req.body.date,\r\n        start_time: req.body.start_time,\r\n        end_time: req.body.end_time,\r\n        room_id: req.body.room_id,\r\n    }, function(err, result) {\r\n        if (err) throw err;\r\n        res.json({\r\n            'msg': 'Added successfully!'\r\n        });\r\n    });\r\n});\r\n\r\napp.post('/check_availability', (req, res) => {\r\n    console.log(req.body);\r\n    var sql = \"SELECT * FROM meeting WHERE room_id = ? \";\r\n    dbConn.query(sql, [req.body.room_id], function(err, result) {\r\n        if (err) throw err;\r\n        console.log(result);\r\n        res.json({\r\n            'msg': 'Success!',\r\n            'response': result\r\n        });\r\n    });\r\n});\r\n\r\napp.post('/delete_meeting', (req, res) => {\r\n    var sql = \"DELETE FROM meeting WHERE id = ?\";\r\n    dbConn.query(sql, [req.body.id], function(err, result) {\r\n        if (err) throw err;\r\n        res.json({\r\n            'msg': 'Success!',\r\n        });\r\n    });\r\n});\r\n\r\napp.post('/get_rooms', (req, res) => {\r\n    var sqlNext = \"SELECT * FROM meeting WHERE room_id = ?\";\r\n    dbConn.query(sqlNext, [req.body.id], function(err, resultNext) {\r\n        if (err) throw err;\r\n        res.json({\r\n            'msg': 'Success!',\r\n            'response': resultNext\r\n        });\r\n    });\r\n    // var sql = \"SELECT * FROM rooms\";\r\n    // var obj = [];\r\n    // dbConn.query(sql, [], function(err, result) {\r\n    //     if (err) throw err;\r\n    //     const resData = result;\r\n    //     resData.forEach(async(element) => {\r\n    //         var sqlNext = \"SELECT * FROM meeting WHERE room_id = ?\";\r\n    //         dbConn.query(sqlNext, [element.id], function(err, resultNext) {\r\n    //             if (err) throw err;\r\n    //             element['meetings'] = resultNext;\r\n    //             console.log('line68')\r\n    //         });\r\n    //     });\r\n    //     res.json({\r\n    //         'msg': 'Success!',\r\n    //         'response': resData\r\n    //     });\r\n    //     console.log('line72')\r\n    // });\r\n});\r\n\r\n\r\napp.listen('8080', () => console.log(`Example app listening on port 8080!`))"]}